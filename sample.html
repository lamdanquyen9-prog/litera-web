<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>LITERA ‚Äì Literary Community</title>
  <style>
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Helvetica Neue",sans-serif;background:#f2f2f2;color:#111}
    section{display:none}
    button{cursor:pointer}

    /* ===== INTRO ===== */
    #intro{display:block;padding:80px 18%;background:#fff}
    #intro h1{font-size:48px;margin-bottom:10px}
    #intro p{font-size:18px;line-height:1.7;color:#444}
    #intro button{margin-top:40px;padding:14px 36px;border-radius:30px;border:none;background:#111;color:#fff;font-size:18px}

    /* ===== LOGIN ===== */
    #login{padding:60px;text-align:center}
    .login-box{background:#fff;max-width:400px;margin:auto;padding:30px;border-radius:20px}
    .login-box input{width:100%;padding:12px;margin-bottom:12px;border-radius:10px;border:1px solid #ccc}
    .login-box button{width:100%;padding:12px;border-radius:20px;border:none;background:#111;color:#fff;font-size:16px}
    .login-btn{margin-bottom:10px}


    /* ===== APP ===== */
    #app{height:100vh;display:flex}
    .sidebar{width:220px;background:#fff;border-right:1px solid #ddd;padding:20px}
    .sidebar button{width:100%;margin-bottom:12px;padding:12px;border-radius:12px;border:none;background:#f2f2f2;font-size:16px}
    .main{flex:1;padding:20px;overflow-y:auto;padding-bottom:140px}
    .search{width:100%;padding:14px;border-radius:30px;border:1px solid #ccc;margin-bottom:20px}
    .carousel{display:flex;gap:16px;overflow-x:auto;margin-bottom:25px}
    .slide{width:160px;flex-shrink:0;text-align:center;cursor:pointer}
    .slide img{width:100%;height:220px;object-fit:cover;border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.15)}
    .slide p{font-weight:600;font-size:14px}
    .post{background:#fff;padding:20px;border-radius:18px;margin-bottom:20px}
    .post img{max-width:100%;border-radius:14px;margin-top:10px}
    .post-actions span{margin-right:15px;color:#555}
    .activity-item{background:#fff;padding:16px;border-radius:14px;margin-bottom:12px;border-left:4px solid #111}
    .profile-header{display:flex;gap:20px;align-items:center;margin-bottom:20px}
    .avatar{width:90px;height:90px;border-radius:50%;background:#ccc}

    /* ===== JOURNAL BAR ===== */
    #journalBar{position:fixed;bottom:0;left:220px;right:0;background:#fff;border-top:1px solid #ddd;padding:12px 20px;display:none}
    #journalBar textarea{width:60%;height:50px;border-radius:14px;border:1px solid #ccc;padding:10px}
    #journalBar input{margin-left:10px}
    #journalBar button{margin-left:10px;padding:10px 20px;border-radius:20px;border:none;background:#111;color:#fff}

    /* ===== MODAL ===== */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6)}
    .modal-content{background:#fff;width:70%;margin:8% auto;padding:25px;border-radius:18px}
    .close{float:right;font-size:26px;cursor:pointer}

    .carousel {
  display:flex;
  gap:16px;
  overflow-x:auto;
  scroll-behavior:smooth;
  padding:10px 0;
}
.carousel::-webkit-scrollbar { 
  display:none; 
} /* ·∫®n thanh cu·ªôn */
  </style>
</head>
<body>

  <!-- INTRO -->
  <section id="intro">
    <h1>LITERA</h1>
    <p>LITERA - di·ªÖn ƒë√†n ph√°t tri·ªÉn vƒÉn h·ªçc & r√®n luy·ªán t∆∞ duy ph·∫£n bi·ªán, n∆°i b·∫°n c√≥ th·ªÉ t·ª± do chia s·∫ª quan ƒëi·ªÉm c√° nh√¢n, th·∫£o lu·∫≠n c√°c v·∫•n ƒë·ªÅ x√£ h·ªôi ‚Äì vƒÉn h·ªçc ƒë∆∞∆°ng ƒë·∫°i.</p>
    <button onclick="goLogin()">Y√™u c·∫ßu ƒëƒÉng nh·∫≠p</button>
  </section>

  <!-- LOGIN -->
  <section id="login">
    <h2>ƒêƒÉng nh·∫≠p / T·∫°o t√†i kho·∫£n</h2>
    <button class="login-btn" id="googleBtn">Google</button>
    <button class="login-btn" id="facebookBtn">Facebook</button>
    <hr style="width:300px;margin:30px auto">
    <div class="login-box">
      <div style="display:flex;gap:8px;margin-bottom:12px">
        <button id="modeLogin" class="login-btn" style="flex:1;background:#111;color:#fff">ƒêƒÉng nh·∫≠p</button>
        <button id="modeSignup" class="login-btn" style="flex:1;background:#f2f2f2;color:#111">T·∫°o t√†i kho·∫£n</button>
      </div>
      <input id="username" placeholder="Username / Email">
      <input id="password" type="password" placeholder="M·∫≠t kh·∫©u">
      <input id="confirm" type="password" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" style="display:none">
      <button id="continueBtn">Ti·∫øp t·ª•c</button>
    </div>
  </section>

  <!-- APP -->
  <section id="app">
    <div class="sidebar">
      <button onclick="showFeed()">Newfeeds</button>
      <button onclick="showActivity()">Activity</button>
      <button onclick="showProfile()">Profile</button>
      <button onclick="showLibrary()">Library</button>
      <button onclick="showForum()">Forum</button>
      <button onclick="showSettings()">Settings</button>
    </div>
    <div class="main" id="content"></div>
  </section>

  <!-- JOURNAL BAR -->
  <div id="journalBar">
    <textarea id="journalText" placeholder="Vi·∫øt journal c·ªßa b·∫°n..."></textarea>
    <input type="file" id="journalImage" accept="image/*">
    <button onclick="createPost()">ƒêƒÉng</button>
  </div>

  <!-- BOOK MODAL -->
  <div id="bookModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">√ó</span>
      <h2 id="bookTitle"></h2>
      <p id="bookAuthor"></p>
      <img id="bookAuthorImg"
     onclick="openAuthorProfile()"
     style="width:80px;height:80px;border-radius:50%;
            object-fit:cover;cursor:pointer;display:none">

      <p id="bookGenre"></p>
      <p id="bookContent"></p>
      <p id="bookIntro"></p>
      <p id="bookLink"></p>
    </div>
  </div>

<script> 
  let currentAuthorKey = null;

    /* ELEMENTS */
const intro=document.getElementById("intro");
const login=document.getElementById("login");
const app=document.getElementById("app");
const content=document.getElementById("content");
const journalBar=document.getElementById("journalBar");
const bookModal=document.getElementById("bookModal");
const bookTitle=document.getElementById("bookTitle");
const bookAuthor=document.getElementById("bookAuthor");
const bookGenre=document.getElementById("bookGenre");
const bookContent=document.getElementById("bookContent");
const bookIntro=document.getElementById("bookIntro");
const bookLink=document.getElementById("bookLink");

/* LOGIN ELEMENTS */
const googleBtn=document.getElementById("googleBtn");
const facebookBtn=document.getElementById("facebookBtn");
const modeLoginBtn=document.getElementById("modeLogin");
const modeSignupBtn=document.getElementById("modeSignup");
const usernameInput=document.getElementById("username");
const passwordInput=document.getElementById("password");
const confirmInput=document.getElementById("confirm");
const continueBtn=document.getElementById("continueBtn");
let authMode="login";

/* AUTO LOGIN */
if(localStorage.getItem("user")){
  intro.style.display="none";
  app.style.display="flex";
  showFeed();
}

/* AUTH */
function goLogin(){intro.style.display="none";login.style.display="block";}
function setAuthMode(mode){
  authMode=mode;
  if(mode==="login"){confirmInput.style.display="none";continueBtn.textContent="ƒêƒÉng nh·∫≠p";}
  else{confirmInput.style.display="block";continueBtn.textContent="T·∫°o t√†i kho·∫£n";}
}
function loginEmail(){
  const username=usernameInput.value.trim();
  const password=passwordInput.value.trim();
  const confirm=confirmInput.value.trim();
  if(!username||!password){alert("Thi·∫øu th√¥ng tin");return;}
  if(authMode==="signup"){
    if(!confirm){alert("Vui l√≤ng x√°c nh·∫≠n m·∫≠t kh·∫©u");return;}
    if(password!==confirm){alert("M·∫≠t kh·∫©u kh√¥ng kh·ªõp");return;}
  }
  localStorage.setItem("user",username);
  login.style.display="none";app.style.display="flex";showFeed();
}
googleBtn.onclick=()=>{localStorage.setItem("user","google_user");login.style.display="none";app.style.display="flex";showFeed();}
facebookBtn.onclick=()=>{localStorage.setItem("user","facebook_user");login.style.display="none";app.style.display="flex";showFeed();}
modeLoginBtn.onclick=()=>setAuthMode("login");
modeSignupBtn.onclick=()=>setAuthMode("signup");
setAuthMode("login");
continueBtn.onclick=loginEmail;

/* BOOK DATA */
const books={
  chipheo:{
    title:"Ch√≠ Ph√®o",
    author:"Nam Cao (1915 - 1951)",
    genre:"Truy·ªán ng·∫Øn",
    content:"Bi k·ªãch ng∆∞·ªùi n√¥ng d√¢n b·ªã tha h√≥a.",
    intro:"Truy·ªán ng·∫Øn ti√™u bi·ªÉu c·ªßa Nam Cao, vi·∫øt nƒÉm 1941. T√°c ph·∫©m ph·∫£n √°nh hi·ªán th·ª±c x√£ h·ªôi n√¥ng th√¥n Vi·ªát Nam tr∆∞·ªõc C√°ch m·∫°ng th√°ng T√°m. Qua nh√¢n v·∫≠t Ch√≠ Ph√®o, nh√† vƒÉn ph∆°i b√†y bi k·ªãch c·ªßa ng∆∞·ªùi n√¥ng d√¢n b·ªã t∆∞·ªõc ƒëo·∫°t quy·ªÅn l√†m ng∆∞·ªùi. ƒê·ªìng th·ªùi ƒë·∫∑t ra c√¢u h·ªèi v·ªÅ kh√°t v·ªçng ƒë∆∞·ª£c s·ªëng l∆∞∆°ng thi·ªán.",
    link:"https://book.sachgiai.com/truyen/truyen-ngan-chi-pheo.html"
  },
  noibuon:{
    title:"N·ªói bu·ªìn chi·∫øn tranh",
    author:"B·∫£o Ninh",
    content:"N·ªói ƒëau h·∫≠u chi·∫øn.(T√°c ph·∫©m ƒëang g√¢y tranh c√£i)",
    intro:"Ti·ªÉu thuy·∫øt n·ªïi ti·∫øng c·ªßa B·∫£o Ninh, xu·∫•t b·∫£n nƒÉm 1990. T√°c ph·∫©m k·ªÉ v·ªÅ cu·ªôc ƒë·ªùi nh√¢n v·∫≠t Ki√™n ‚Äì m·ªôt ng∆∞·ªùi l√≠nh tr·ªü v·ªÅ sau chi·∫øn tranh, lu√¥n √°m ·∫£nh b·ªüi k√Ω ·ª©c kh·ªëc li·ªát. T√°c ph·∫©m kh·∫Øc h·ªça nh·ªØng m·∫•t m√°t tinh th·∫ßn, s·ª± c√¥ ƒë∆°n v√† bi k·ªãch c√° nh√¢n trong b·ªëi c·∫£nh l·ªãch s·ª≠."
  },
  book1984:{
    title:"1984",
    author:"George Orwell",
    content:"X√£ h·ªôi to√†n tr·ªã.",
    intro:"Ti·ªÉu thuy·∫øt dystopia kinh ƒëi·ªÉn, xu·∫•t b·∫£n nƒÉm 1949. George Orwell x√¢y d·ª±ng m·ªôt th·∫ø gi·ªõi n∆°i m·ªçi h√†nh vi v√† t∆∞ t∆∞·ªüng ƒë·ªÅu b·ªã gi√°m s√°t b·ªüi 'Big Brother'. T√°c ph·∫©m c·∫£nh b√°o v·ªÅ nguy c∆° m·∫•t t·ª± do c√° nh√¢n. ƒê·ªìng th·ªùi ph∆°i b√†y s·ª± thao t√∫ng c·ªßa quy·ªÅn l·ª±c v√† h·ªá th·ªëng to√†n tr·ªã.",
    link:"http://echithai.com/ebook/classic/1984.pdf"
  },
  vietbac:{
    title:"Vi·ªát B·∫Øc",
    author:"T·ªë H·ªØu (1920 - 2002)",
    genre:"Th∆° l·ª•c b√°t",
    content:"Nghƒ©a t√¨nh c√°ch m·∫°ng.",
    intro:"B√†i th∆° ti√™u bi·ªÉu c·ªßa T·ªë H·ªØu, s√°ng t√°c nƒÉm 1954 khi kh√°ng chi·∫øn ch·ªëng Ph√°p th·∫Øng l·ª£i. T√°c ph·∫©m l√† l·ªùi ƒë·ªëi ƒë√°p gi·ªØa ng∆∞·ªùi ƒëi v√† ng∆∞·ªùi ·ªü l·∫°i, chan ch·ª©a t√¨nh nghƒ©a qu√¢n d√¢n. ƒê·ªìng th·ªùi ca ng·ª£i s·ª©c m·∫°nh ƒëo√†n k·∫øt v√† l√Ω t∆∞·ªüng c√°ch m·∫°ng.",
    link:"https://bennghe.com.vn/blogs/muon-neo-sach/gioi-thieu-bai-tho-viet-bac-1954-to-huu-tron-bai-tho"
  },
  muoicuarung:{
    title:"Mu·ªëi c·ªßa r·ª´ng",
    author:"Nguy·ªÖn Huy Thi·ªáp (1950 - 2021)",
    genre:"Truy·ªán ng·∫Øn",
    content:"H√†nh tr√¨nh ƒëi sƒÉn v√† s·ª± th·ª©c t·ªânh l∆∞∆°ng tri.",
    intro:"Con ng∆∞·ªùi v√† thi√™n nhi√™n: Ph·∫£n √°nh m·ªëi quan h·ªá m·∫≠t thi·∫øt, s·ª± g·∫Øn b√≥ kh√¥ng th·ªÉ t√°ch r·ªùi gi·ªØa con ng∆∞·ªùi v√† th·∫ø gi·ªõi t·ª± nhi√™n.Thi·ªán - √Åc: Cu·ªôc ƒë·∫•u tranh n·ªôi t√¢m gi·ªØa b·∫£n nƒÉng sƒÉn m·ªìi (√°c) v√† l√≤ng tr·∫Øc ·∫©n (thi·ªán) trong m·ªói con ng∆∞·ªùi.Gi√° tr·ªã s·ªëng: T√°c ph·∫©m g·ª≠i g·∫Øm th√¥ng ƒëi·ªáp v·ªÅ l√≤ng nh√¢n √°i, s·ª± t√¥n tr·ªçng m·ªçi sinh linh v√† b√†i h·ªçc v·ªÅ tr√°ch nhi·ªám b·∫£o v·ªá m√¥i tr∆∞·ªùng s·ªëng.",
    link:"https://baotangvanhoc.vn/tac-pham/truyen/chiec-thuyen-ngoai-xa/"
  },
  chiecthuyenngoaixa:{
    title:"Chi·∫øc thuy·ªÅn ngo√†i xa",
    author:"Nguy·ªÖn Minh Ch√¢u (1930 - 1989)",
    genre:"Truy·ªán ng·∫Øn",
    content:"V·∫•n n·∫°n b·∫°o l·ª±c gia ƒë√¨nh.",
    intro:"Chi·∫øc thuy·ªÅn ngo√†i xa l√† m·ªôt t√°c ph·∫©m n·ªïi ti·∫øng c·ªßa nh√† vƒÉn Nguy·ªÖn Minh Ch√¢u, ƒë∆∞·ª£c s√°ng t√°c v√†o nƒÉm 1983. T√°c ph·∫©m ph·∫£n √°nh hi·ªán th·ª±c kh√≥ khƒÉn c·ªßa cu·ªôc s·ªëng ng∆∞·ªùi d√¢n ch√†i v√† ƒë·∫∑t ra v·∫•n ƒë·ªÅ v·ªÅ c√°i nh√¨n ƒëa chi·ªÅu v·ªÅ cu·ªôc s·ªëng v√† ngh·ªá thu·∫≠t. ƒê√¢y l√† m·ªôt t√°c ph·∫©m ti√™u bi·ªÉu cho phong c√°ch truy·ªán ng·∫Øn t·ª± s·ª±-tri·∫øt l√Ω c·ªßa t√°c gi·∫£ sau nƒÉm 1975, th∆∞·ªùng ƒë∆∞·ª£c gi·∫£ng d·∫°y trong ch∆∞∆°ng tr√¨nh Ng·ªØ vƒÉn l·ªõp 12 v√† l√† m·ªôt trong nh·ªØng ƒë·ªÅ thi t·ªët nghi·ªáp THPT.",
    link:"https://isach.info/story.php?story=muoi_cua_rung__nguyen_huy_thiep"
  },
   nhatkidangthuytram:{
    title:"Nh·∫≠t k√≠ ƒê·∫∑ng Th√πy Tr√¢m",
    author:"ƒê·∫∑ng Th√πy Tr√¢m (1942 - 1970)",
    genre:"H·ªìi k√≠ - T√πy b√∫t",
    content:"Nh·∫≠t k√Ω ƒê·∫∑ng Th√πy Tr√¢m l√† hai t·∫≠p nh·∫≠t k√Ω vi·∫øt tay c·ªßa b√°c sƒ© ƒê·∫∑ng Th√πy Tr√¢m t·ª´ ng√†y 8 th√°ng 4 nƒÉm 1968 ƒë·∫øn ng√†y 20 th√°ng 6 nƒÉm 1970 (hai ng√†y tr∆∞·ªõc khi b√† qua ƒë·ªùi).",
    intro:"M·ªôt cu·ªën nh·∫≠t k√≠ nh·∫∑t ƒë∆∞·ª£c b√™n x√°c c·ªßa m·ªôt n·ªØ Vi·ªát C·ªông ƒë√£ su√Ωt b·ªã ng∆∞·ªùi l√≠nh M·ªπ n√©m v√†o l·ª≠a, nh∆∞ng ng∆∞·ªùi phi√™n d·ªãch ƒë√£ khuy√™n anh ta n√™n gi·ªØ l·∫°i v√¨ ‚Äútrong ƒë√≥ c√≥ l·ª≠a‚Äù. Nh·∫≠t k√≠ ƒê·∫∑ng Th√πy Tr√¢m l√† nh·ªØng ghi ch√©p h√†ng ng√†y c·ªßa m·ªôt ng∆∞·ªùi n·ªØ b√°c sƒ© v·ªÅ cu·ªôc s·ªëng c·ªßa ch·ªã n∆°i chi·∫øn tuy·∫øn. Cu·ªën nh·∫≠t k√≠ l√† th·∫ø gi·ªõi ri√™ng c·ªßa ng∆∞·ªùi tr√≠ th·ª©c nh·∫°y c·∫£m m√† kh√¥ng y·∫øu ƒëu·ªëi, tha thi·∫øt v·ªõi cu·ªôc s·ªëng m√† kh√¥ng h·ªÅ s·ª£ h√£i tr∆∞·ªõc nh·ªØng gian nan. ·ªû ƒë√≥ ta v·∫´n g·∫∑p nh·ªØng bƒÉn khoƒÉn trƒÉn tr·ªü tr∆∞·ªõc t√¨nh y√™u, tr∆∞·ªõc cu·ªôc s·ªëng ph·ª©c t·∫°p h√†ng ng√†y, nh·ªØng n·ªói bu·ªìn, n·ªói nh·ªõ nhung, s·ª± c√¥ ƒë∆°n c·ªßa m·ªôt ng∆∞·ªùi con g√°i, nh∆∞ng ƒë·ªìng th·ªùi ch√∫ng ta c≈©ng th·∫•y ƒë∆∞·ª£c m·ªôt √Ω ch√≠ m√£nh li·ªát, nh·ªØng l·ªùi n√≥i t·ª± ƒë·ªông vi√™n c·∫£nh t·ªânh, m·ªôt l√≤ng can ƒë·∫£m phi th∆∞·ªùng ‚Äì nh·ªØng ƒëi·ªÅu ƒë√£ l√†m n√™n m·ªôt th·∫ø h·ªá anh h√πng.",
    link:"https://nhasachmienphi.com/nhat-ky-dang-thuy-tram.html"
  },
   khuctrangca:{
    title:"Kh√∫c tr√°ng ca nh√† gi√†n",
    author:"Xu√¢n Ba (1954)",
    genre:"Ph√≥ng s·ª±",
    content:"S·ª± l·∫°c quan v√† tinh th·∫ßn chi·∫øn ƒë·∫•u c·ªßa nh·ªØng chi·∫øn sƒ© canh gi·ªØ n∆°i bi·ªÉn c·∫£.",
    intro:"VƒÉn b·∫£n vi·∫øt v·ªÅ c√¢u chuy·ªán c·ªßa t√°c gi·∫£, l√† m·ªôt nh√† b√°o c√≥ d·ªãp ƒë·∫øn thƒÉm nh√† gi√†n ·ªü khu v·ª±c Ba K√®. Qua vƒÉn b·∫£n ta nh·∫≠n ra v·∫ª ƒë·∫πp v√† gi√° tr·ªã ·∫©n n√°u ƒë·∫±ng sau nh·ªØng h√≤n ƒë·∫£o ch√¨m v√† s·ª± kh·∫Øc nghi·ªát c·ªßa thi√™n nhi√™n d·ªØ d·ªôi ƒë√£ ƒë∆∞a ƒë·∫øn bao hi sinh, m·∫•t m√°t c·ªßa c√°c chi·∫øn sƒ© nh√† gi√†n. Qua ƒë√≥, ng·ª£i ca s·ª± ki√™n c∆∞·ªùng, b·ªÅn b·ªâ v√† kh√¥ng ng·ª´ng s√°ng t·∫°o, ph√°t tri·ªÉn ƒë·ªÉ thi·∫øt k·∫ø n√™n nh·ªØng c√¥ng tr√¨nh v·ªØng ch√£i h∆°n c·ªßa c√°c chi·∫øn sƒ© nh√† gi√†n.",
    link:"https://www.scribd.com/document/837088452/KHUC-TRANG-CA-NHA-GIAN"
  },
  luubiet:{
    title:"Xu·∫•t d∆∞∆°ng l∆∞u bi·ªát",
    author:"Phan B·ªôi Ch√¢u (1867 - 1940)",
    genre:"Th∆° Th·∫•t ng√¥n b√°t c√∫",
    content:"B√†i th∆° th·ªÉ hi·ªán t·∫•m l√≤ng c·ªßa m·ªôt ch√≠ sƒ© c√°ch m·∫°ng mang trong th·ªùi k√¨ ƒë·∫•t n∆∞·ªõc b·ªã ngo·∫°i x√¢m. √îng mang trong m√¨nh l√≤ng y√™u n∆∞·ªõc n·ªìng n√†n, l√≤ng nhi·ªát huy·∫øt c√πng v·ªõi t∆∞ t∆∞·ªüng m·ªõi m·∫ª, ti·∫øn b·ªô, s·∫µn s√†ng ƒë∆∞∆°ng ƒë·∫ßu kh√≥ khƒÉn, ƒëi ƒë·∫øn ph∆∞∆°ng tr·ªùi m·ªõi ƒë·ªÉ t√¨m ra con ƒë∆∞·ªùng gi·∫£i ph√≥ng d√¢n t·ªôc.",
    intro:"B√†i n√†y Phan B·ªôi Ch√¢u l√†m ng√†y m√πng 2 th√°ng Gi√™ng nƒÉm ·∫§t T·ªã 1905 khi xu·∫•t d∆∞∆°ng ·ªü c·∫£ng H·∫£i Ph√≤ng ƒë·ªÉ t·ª´ gi√£ c√°c ƒë·ªìng ch√≠ ƒë·ªÉ sang Nh·∫≠t B·∫£n. V·ªÅ sau √¥ng c√≥ ch√©p b√†i n√†y trong Ng·ª•c trung th∆∞.",
    link:"https://www.thivien.net/Phan-B%E1%BB%99i-Ch%C3%A2u/Xu%E1%BA%A5t-d%C6%B0%C6%A1ng-l%C6%B0u-bi%E1%BB%87t/poem-Yrk8Z5PUvxb0Vkin_0xrSw"
  },
  taytien:{
    title:"T√¢y Ti·∫øn",
    author:"Quang D≈©ng (1921 - 1988)",
    genre:"Th∆° m·ªõi b·∫£y ch·ªØ",
    content:"Thi√™n nhi√™n mi·ªÅn T√¢y hi·ªán l√™n v·ª´a d·ªØ d·ªôi, hi·ªÉm tr·ªü, v·ª´a mƒ© l·ªá, th∆° m·ªông, l√† th·ª≠ th√°ch v√† c≈©ng l√† ph√¥ng n·ªÅn cho v·∫ª ƒë·∫πp c·ªßa ng∆∞·ªùi l√≠nh. Ng∆∞·ªùi l√≠nh T√¢y Ti·∫øn hi·ªán ra trong d√°ng v·∫ª tr·∫ª trung, l√£ng m·∫°n, ƒë·∫ßy ch·∫•t bi tr√°ng ‚Äì nh·ªØng ch√†ng trai H√† N·ªôi ra ƒëi v·ªõi ‚Äúm·∫Øt bi√™n c∆∞∆°ng‚Äù, ‚Äúd√°ng ki√™u h√πng‚Äù, s·∫µn s√†ng hy sinh v√¨ l√Ω t∆∞·ªüng ƒë·ªôc l·∫≠p, t·ª± do c·ªßa T·ªï qu·ªëc. D√π cu·ªôc s·ªëng gian kh·ªï, thi·∫øu th·ªën, h·ªç v·∫´n gi·ªØ trong tim t√¨nh y√™u qu√™ h∆∞∆°ng, t√¨nh ƒë·ªìng ƒë·ªôi v√† kh√°t v·ªçng s·ªëng ƒë·∫πp.",
    intro:"Quang D≈©ng tham gia ƒëo√†n qu√¢n T√¢y Ti·∫øn nƒÉm 1947 v√† h√†nh qu√¢n l√™n T√¢y B·∫Øc v·ªõi nhi·ªám v·ª• ph·ªëi h·ª£p v·ªõi b·ªô ƒë·ªôi n∆∞·ªõc b·∫°n ƒë·ªÉ b·∫£o v·ªá v√πng bi√™n gi·ªõi Vi·ªát L√†o. Ban ƒë·∫ßu, b√†i th∆° ƒë∆∞·ª£c ƒë·∫∑t t√™n l√† Nh·ªõ T√¢y Ti·∫øn v√† ƒëƒÉng l·∫ßn ƒë·∫ßu tr√™n B√°o Qu√¢n B·∫°ch ƒê·∫±ng c·ªßa Li√™n khu III nƒÉm 1948, tr√™n B√°o VƒÉn ngh·ªá Vi·ªát B·∫Øc nƒÉm 1949.",
    link:"https://www.thivien.net/Quang-D%C5%A9ng/T%C3%A2y-Ti%E1%BA%BFn/poem-xTFdqZUSfE3riX2yNfcavA"
  }
};

const authors = {
  "Nam Cao": {
    name: "Nam Cao",
    avatar: "https://vanvn.vn/wp-content/uploads/2023/07/nam-cao-vanvn4.jpg",
    bio: "Nh√† vƒÉn Nam Cao (1915/1917- 28 th√°ng 11 nƒÉm 1951) - t√™n th·∫≠t l√† Tr·∫ßn H·ªØu Tri, l√† m·ªôt nh√† vƒÉn ng∆∞·ªùi Vi·ªát Nam. √îng l√† nh√† vƒÉn hi·ªán th·ª±c l·ªõn (tr∆∞·ªõc C√°ch m·∫°ng), m·ªôt nh√† b√°o kh√°ng chi·∫øn (sau C√°ch m·∫°ng), m·ªôt trong nh·ªØng nh√† vƒÉn ti√™u bi·ªÉu nh·∫•t th·∫ø k·ª∑ 20. Nam Cao c√≥ nhi·ªÅu ƒë√≥ng g√≥p quan tr·ªçng ƒë·ªëi v·ªõi vi·ªác ho√†n thi·ªán phong c√°ch truy·ªán ng·∫Øn v√† ti·ªÉu thuy·∫øt Vi·ªát Nam ·ªü n·ª≠a ƒë·∫ßu th·∫ø k·ª∑ 20.",
    years: "1915 ‚Äì 1951",
    works: ["Ch√≠ Ph√®o, Ngh√®o, L√£o H·∫°c, ƒêi·∫øu VƒÉn, ƒê√¥i M·∫Øt,..."]
  },
  "T·ªë H·ªØu": {
    name: "T·ªë H·ªØu",
    avatar: "https://damrong.lamdong.dcs.vn/resize.aspx?file=%2FPortals%2F9%2Fmedia%2Fnewsimage%2F1%2F-%2F0%2F1-08.jpg&w=800&h=-1",
    bio: "T·ªë H·ªØu l√† nh√† th∆° c√°ch m·∫°ng l·ªõn nh·∫•t Vi·ªát Nam trong th·∫ø k·ª∑ XX. √îng ƒë√£ ƒë∆∞a th∆° ch√≠nh tr·ªã ƒë·∫øn tr√¨nh ƒë·ªô r·∫•t tr·ªØ t√¨nh. Nh·ªØng t√°c ph·∫©m c·ªßa √¥ng l√† nh·ªØng b√†i ca c√°ch m·∫°ng, ph·∫£n √°nh ch√¢n th·ª±c c√°c giai ƒëo·∫°n l·ªãch s·ª≠, h·ª´ng h·ª±c t√≠nh chi·∫øn ƒë·∫•u v√† gi√†u t√≠nh tr·ªØ t√¨nh, c√≥ t√≠nh t∆∞ t∆∞·ªüng cao, s·ª©c ƒë·ªông vi√™n, l√¥i cu·ªën r·ªông r√£i c√°c t·∫ßng l·ªõp nh√¢n d√¢n trong cu·ªôc ƒë·∫•u tranh gi·∫£i ph√≥ng d√¢n t·ªôc v√† x√¢y d·ª±ng ƒë·∫•t n∆∞·ªõc",
    years: "1920 ‚Äì 2002",
    works: ["T·ª´ ·∫§y (1937 - 1946), Vi·ªát B·∫Øc (1947 - 1954), Gi√≥ L·ªông (1955 - 1961), Ra Tr·∫≠n (1962 - 1971),..."]
  },
  "Nguy·ªÖn Minh Ch√¢u": {
    name: "Nguy·ªÖn Minh Ch√¢u",
    avatar: "https://upload.wikimedia.org/wikipedia/vi/3/36/Nh%C3%A0_v%C4%83n_Nguy%E1%BB%85n_Minh_Ch%C3%A2u.jpg",
    bio: "C√¢y b√∫t m·ªü ƒë∆∞·ªùng cho vƒÉn h·ªçc Vi·ªát Nam th·ªùi k·ª≥ ƒë·ªïi m·ªõi.",
    years: "1930 ‚Äì 1989",
    works: [" Sau m·ªôt bu·ªïi t·∫≠p (1960); C·ª≠a s√¥ng(1966), D·∫•u ch√¢n ng∆∞·ªùi l√≠nh(1972), Mi·ªÅn ch√°y (1977), Ng∆∞·ªùi ƒë√†n b√† tr√™n chuy·∫øn t√†u t·ªëc h√†nh (1983), B·∫øn qu√™ (1985), Phi√™n ch·ª£ Gi√°p (1989),..."]
  },
  "ƒê·∫∑ng Th√πy Tr√¢m": {
    name: "ƒê·∫∑ng Th√πy Tr√¢m",
    avatar: "https://images2.thanhnien.vn/528068263637045248/2025/6/13/dang-thuy-tram-1-online-17498257185181394348576.jpg",
    bio: "Li·ªát sƒ© ‚Äì B√°c sƒ© ƒê·∫∑ng Th√πy Tr√¢m: S√°ng m√£i ng·ªçn l·ª≠a tu·ªïi hai m∆∞∆°i",
    years: "1942 ‚Äì 1970",
    works: ["Nh·∫≠t k√≠ ƒê·∫∑ng Th√πy Tr√¢m"]
  },
    "Nguy·ªÖn Huy Thi·ªáp": {
    name: "Nguy·ªÖn Huy Thi·ªáp",
    avatar: "https://vanvn.vn/wp-content/uploads/2021/03/Nguyen-Huy-Thiep-HXTuyen.jpg",
    bio: "Nguy·ªÖn Huy Thi·ªáp sinh ng√†y 29 th√°ng 4 nƒÉm 1950 t·∫°i huy·ªán Thanh Tr√¨, H√† N·ªôi. √îng l√† nh√† vƒÉn ƒë∆∞∆°ng ƒë·∫°i Vi·ªát Nam n·ªïi ti·∫øng trong c√°c th·ªÉ lo·∫°i k·ªãch, truy·ªán ng·∫Øn v√† ti·ªÉu thuy·∫øt v·ªõi nh·ªØng g√≥c nh√¨n m·ªõi, t√°o b·∫°o. √îng t·ª´ng nh·∫≠n ƒë∆∞·ª£c Hu√¢n ch∆∞∆°ng VƒÉn h·ªçc Ngh·ªá thu·∫≠t Ph√°p (2007), gi·∫£i th∆∞·ªüng Premio Nonino, Italy (2008). Sau ti·ªÉu thuy·∫øt Vong b∆∞·ªõm, m·ªôt th·ªÉ nghi·ªám v·ªõi ch√®o c·ªï, Nguy·ªÖn Huy Thi·ªáp ƒë√£ quy·∫øt ƒë·ªãnh d·ª´ng h·∫≥n nghi·ªáp s√°ng t√°c ·ªü tu·ªïi 65.",
    years: "1950 - 2021",
    works: ["T∆∞·ªõng v·ªÅ h∆∞u, Kh√¥ng c√≥ vua, Nh·ªØng ng·ªçn gi√≥ Hua T√°t, Ch·∫£y ƒëi s√¥ng ∆°i, Con g√°i th·ªßy th·∫ßn..."]
  },
  "Phan B·ªôi Ch√¢u": {
    name: "Phan B·ªôi Ch√¢u",
    avatar: "https://baokhanhhoa.vn/CMSImage/Resources/Uploaded/dinhnhi/0911phanboichau1.jpg",
    bio: "Phan B·ªôi Ch√¢u ÊΩò‰Ω©Áè† (26/12/1867 - 29/12/1940) sinh t·∫°i l√†ng ƒêan Nhi·ªÖm, x√£ Nam Ho√†, huy·ªán Nam ƒê√†n, t·ªânh Ngh·ªá An, cha l√† Phan VƒÉn Ph·ªï, m·∫π l√† Nguy·ªÖn Th·ªã Nh√†n, m·∫•t t·∫°i Hu·∫ø, l√† m·ªôt nh√† c√°ch m·∫°ng Vi·ªát Nam trong phong tr√†o ch·ªëng Ph√°p. √îng ƒë√£ th√†nh l·∫≠p phong tr√†o Duy T√¢n v√† kh·ªüi x∆∞·ªõng phong tr√†o ƒê√¥ng Du.",
    years: "1867 - 1940",
    works: ["‚ÄúVi·ªát Nam vong qu·ªëc s·ª≠‚Äù,  ‚ÄúH·∫£i ngo·∫°i huy·∫øt th∆∞‚Äù,  ‚ÄúNg·ª•c trung th∆∞‚Äù,  ‚ÄúTr√πng Quang t√¢m s·ª≠‚Äù,  ‚ÄúPhan S√†o Nam vƒÉn t·∫≠p‚Äù,  ‚ÄúPhan B·ªôi Ch√¢u ni√™n bi·ªÉu‚Äù,...."]
  },
  "Quang D≈©ng": {
    name: "Quang D≈©ng",
    avatar: "https://www.thivien.net/attachment/koGngMcp89Pm8QL6IhNyiA.1110857880.webp",
    bio: "Quang D≈©ng (1921 - 13/10/1988) t√™n th·∫≠t v·ªën l√† B√πi ƒê√¨nh D·∫≠u nh∆∞ng v·ªÅ sau b·ªë ƒë·ªïi th√†nh B√πi ƒê√¨nh Di·ªám v√¨ t√™n D·∫≠u tr√πng v·ªõi m·ªôt ng∆∞·ªùi trong h·ªç, sinh t·∫°i l√†ng Ph∆∞·ª£ng Tr√¨, huy·ªán ƒêan Ph∆∞·ª£ng, t·ªânh S∆°n T√¢y (nay thu·ªôc H√† N·ªôi), m·∫•t t·∫°i H√† N·ªôi. Quang D≈©ng tham gia ho·∫°t ƒë·ªông c√°ch m·∫°ng t·ª´ tr∆∞·ªõc Kh·ªüi nghƒ©a Th√°ng T√°m. Khi t·ªïng kh·ªüi nghƒ©a 19-8-1945 th√†nh c√¥ng, √¥ng ƒë∆∞·ª£c c·ª≠ l√†m ph√°i vi√™n ph√≤ng Qu√¢n v·ª• B·∫Øc b·ªô. Nh·ªØng ng√†y ƒë·∫ßu kh√°ng chi·∫øn, √¥ng tham gia l·∫•y v≈© kh√≠ c·ªßa ƒë·ªãch, c·∫•t gi·∫•u m√°y m√≥c qu√¢n s·ª±, ƒëi c√°c ƒë·ªãa ph∆∞∆°ng t√¨m mua v≈© kh√≠ cho c√°ch m·∫°ng. ",
    years: "1921 - 1988",
    works: ["T√¢y Ti·∫øn, ƒê√¥i m·∫Øt ng∆∞·ªùi S∆°n T√¢y, ƒê√¥i b·ªù, Qu√°n b√™n ƒë∆∞·ªùng, L√≠nh r√¢u ria,..."]
  }
};


/* MODAL */
function openBook(k){
  bookModal.style.display="block";
  bookTitle.innerText=books[k].title;
  bookAuthor.innerText="T√°c gi·∫£: "+books[k].author;
  currentAuthorKey = books[k].author.split(" (")[0];
  const img = document.getElementById("bookAuthorImg");
img.src = authors[currentAuthorKey]?.avatar || "";
img.style.display = authors[currentAuthorKey] ? "block" : "none";

  bookGenre.innerText = "Th·ªÉ lo·∫°i: "+(books[k].genre ||"Ch∆∞a c·∫≠p nh·∫≠t");
  bookContent.innerText="N·ªôi dung: "+books[k].content;

  // Intro d·∫°ng g·∫°ch ƒë·∫ßu d√≤ng
  const introParts = books[k].intro.split(".").map(s=>s.trim()).filter(s=>s);
  bookIntro.innerHTML = "Gi·ªõi thi·ªáu:<ul>" + introParts.map(p=>"<li>"+p+"</li>").join("") + "</ul>";

  // Link ri√™ng
  if(books[k].link){
    bookLink.innerHTML = 'ƒê·ªçc s√°ch ·ªü ƒë√¢y: <a href="'+books[k].link+'" target="_blank">'+books[k].link+'</a>';
  } else {
    bookLink.innerHTML = "";
  }
}
function closeModal(){bookModal.style.display="none";}

/* PRESET POST */
if(!localStorage.getItem("preset")){
  localStorage.setItem("posts",JSON.stringify([{
    user:"phuongtranga12",
    title:"ƒê√¥i ch√∫t th·∫Øc m·∫Øc v·ªÅ t√°c ph·∫©m Vi·ªát B·∫Øc.",
    text:"T·∫°i sao nh√† th∆° T·ªë H·ªØu l·∫°i s·ª≠ d·ª•ng c√°c x∆∞ng h√¥ m√¨nh - ta xuy√™n su·ªët b√†i th∆° v·∫≠y m·ªçi ng∆∞·ªùi? M√¨nh l√† ai c√≤n ta l√† ai?",
    likes:3467,
    comments:[
      {user:"hoangminh02",text:"M√¨nh l√† l·ª±c l∆∞·ª£ng kh√°ng chi·∫øn, c√≤n ta l√† nh√¢n d√¢n Vi·ªát B·∫Øc √° b·∫°n."},
      {user:"lananh_lit",text:"C√¢u h·ªèi r·∫•t hay!"},
      {user:"vietdung_review",text:"M√¨nh c≈©ng th·∫Øc m·∫Øc"}
    ]
  }]));
  localStorage.setItem("preset","true");
}

/* FEED */
function showFeed(){
    journalBar.style.display = "flex";

    content.innerHTML = `
<div style="position:relative; margin-bottom:25px;">

  <!-- N√∫t tr√°i -->
  <button id="prevBtn" style="
      position:absolute;top:50%;left:0;transform:translateY(-50%);
      background:#111;color:white;border:none;padding:12px;border-radius:50%;cursor:pointer;z-index:10">‚óÄ</button>

  <!-- N√∫t ph·∫£i -->
  <button id="nextBtn" style="
      position:absolute;top:50%;right:0;transform:translateY(-50%);
      background:#111;color:white;border:none;padding:12px;border-radius:50%;cursor:pointer;z-index:10">‚ñ∂</button>

  <!-- Carousel -->
  <div class="carousel" id="carousel">

      <div class="slide">
        <img src="https://product.hstatic.net/1000237375/product/thiet_ke_chua_co_ten__79__17e55f38561546cea108dbaa92c7721c_master.png"
             onclick="openBook('chipheo')">
        <p>Ch√≠ Ph√®o</p>
        <button type="button" onclick="saveBook('chipheo')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('chipheo')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('chipheo')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://www.nxbtre.com.vn/Images/Book/nxbtre_full_10152022_031532.jpg"
             onclick="openBook('noibuon')">
        <p>N·ªói bu·ªìn chi·∫øn tranh</p>
        <button type="button" onclick="saveBook('noibuon')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('noibuon')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('noibuon')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1327144697i/3744438.jpg">
        <p>1984</p>
        <button type="button" onclick="saveBook('book1984')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('book1984')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('book1984')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://xemsachhay.com/wp-content/uploads/2018/04/7552_p13608.jpg"
             onclick="openBook('vietbac')">
        <p>Vi·ªát B·∫Øc</p>
        <button type="button" onclick="saveBook('vietbac')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('vietbac')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('vietbac')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://isach.info/images/story/cover/muoi_cua_rung__nguyen_huy_thiep.jpg"
             onclick="openBook('muoicuarung')">
        <p>Mu·ªëi c·ªßa r·ª´ng</p>
        <button type="button" onclick="saveBook('muoicuarung')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('muoicuarung')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('muoicuarung')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://i0.wp.com/sachnoiviet.net/wp-content/uploads/2021/11/chiec-thuyen-ngoai-xa.jpg?fit=200%2C300&ssl=1"
             onclick="openBook('chiecthuyenngoaixa')">
        <p>Chi·∫øc thuy·ªÅn ngo√†i xa</p>
        <button type="button" onclick="saveBook('chiecthuyenngoaixa')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('chiecthuyenngoaixa')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('chiecthuyenngoaixa')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://nhasachmienphi.com/images/thumbnail/nhasachmienphi-nhat-ky-dang-thuy-tram.jpg"
             onclick="openBook('nhatkidangthuytram')">
        <p>Nh·∫≠t k√≠ ƒê·∫∑ng Th√πy Tr√¢m</p>
        <button type="button" onclick="saveBook('nhatkidangthuytram')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('nhatkidangthuytram')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('nhatkidangthuytram')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://haylamdo.com/soan-van-12-cd/images/khuc-trang-ca-nha-gian.PNG"
             onclick="openBook('khuctrangca')">
        <p>Kh√∫c tr√°ng ca nh√† gi√†n</p>
        <button type="button" onclick="saveBook('khuctrangca')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('khuctrangca')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('khuctrangca')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://img.loigiaihay.com/picture/article/2020/0103/phan-tich-luu-biet-xuat-duong-795x385-0.jpg"
             onclick="openBook('luubiet')">
        <p>Xu·∫•t d∆∞∆°ng l∆∞u bi·ªát</p>
        <button type="button" onclick="saveBook('luubiet')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('luubiet')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('luubiet')">üó®Ô∏è Tham gia</button>
      </div>

      <div class="slide">
        <img src="https://thanhnien.mediacdn.vn/uploaded/hoangnam/2021_03_14/chantrang2_BICJ.jpg?width=500"
             onclick="openBook('taytien')">
        <p>T√¢y Ti·∫øn</p>
        <button type="button" onclick="saveBook('taytien')">üîñ L∆∞u s√°ch</button>
        <button type="button" onclick="deleteBook('taytien')">‚ùå X√≥a s√°ch</button>
        <button type="button" onclick="joinForum('taytien')">üó®Ô∏è Tham gia</button>
      </div>


    </div>

    <div id="posts"></div>
    `;

    renderPosts();
    // Carousel scroll buttons
const carouselEl = document.getElementById("carousel");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

prevBtn.onclick = () => {
  carouselEl.scrollBy({ left: -200, behavior: "smooth" });
};
nextBtn.onclick = () => {
  carouselEl.scrollBy({ left: 200, behavior: "smooth" });
};

}

/* ===== DELETE BOOK ===== */
function deleteBook(key){
    let library = JSON.parse(localStorage.getItem("library") || "[]");
    if(!library.includes(key)){
        alert("‚ö†Ô∏è S√°ch ch∆∞a c√≥ trong Library");
        return;
    }
    library = library.filter(k => k !== key);
    localStorage.setItem("library", JSON.stringify(library));
    alert("üóëÔ∏è ƒê√£ x√≥a s√°ch kh·ªèi Library");
}



/* POSTS */
function createPost(){
  const text=journalText.value;
  if(!text) return;
  const img=document.getElementById("journalImage").files[0];
  const reader=new FileReader();
  reader.onload=()=>{
    let posts=JSON.parse(localStorage.getItem("posts")||"[]");
    posts.unshift({user:localStorage.getItem("user"),text,likes:0,img:reader.result});
    localStorage.setItem("posts",JSON.stringify(posts));
    journalText.value="";journalImage.value="";
    renderPosts();
  };
  img?reader.readAsDataURL(img):reader.onload();
}
function renderPosts(){
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  document.getElementById("posts").innerHTML=posts.map((p,index)=>`
    <div class="post" id="post-${index}">
      <h3>@${p.user}</h3>
      <h4>${p.title||""}</h4>
      <p>${p.text}</p>
      ${p.img?`<img src="${p.img}">`:""}
      <div class="post-actions">
        <span onclick="likePost(${index})" style="cursor:pointer">‚ù§Ô∏è Th√≠ch (${p.likes})</span>
        <span onclick="toggleComments(${index})" style="cursor:pointer">üí¨ B√¨nh lu·∫≠n (${p.comments?p.comments.length:0})</span>
        <span onclick="repostPost(${index})" style="cursor:pointer">üîÑ Repost (${p.reposts?p.reposts.length:0})</span>
      </div>
      <div class="comments" id="comments-${index}" style="margin-top:10px;display:none">
        ${p.comments && p.comments.length ? p.comments.map(c=>`<p><strong>@${c.user}:</strong> ${c.text}</p>`).join("") : "<p>Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o.</p>"}
        <input type="text" id="commentInput-${index}" placeholder="Vi·∫øt b√¨nh lu·∫≠n..." style="width:80%;padding:6px;border-radius:10px;border:1px solid #ccc;margin-top:6px">
        <button onclick="addComment(${index})" style="padding:6px 12px;margin-left:6px;border:none;border-radius:12px;background:#111;color:white;cursor:pointer">ƒêƒÉng</button>
      </div>
    </div>
  `).join("");
}

/* OTHER */
function showActivity(){
  journalBar.style.display="none";
  content.innerHTML=`<h2>Activity</h2><div class="activity-item">‚ù§Ô∏è C√≥ ng∆∞·ªùi th√≠ch b√†i b·∫°n</div>`;
}

function showProfile(){
  journalBar.style.display="none";
  content.innerHTML=`<h2>@${localStorage.getItem("user")}</h2>`;
}

function showLibrary(){
  journalBar.style.display="none";
  content.innerHTML=`<h2>Library</h2><button onclick="save()">S√°ch ƒë√£ l∆∞u</button>`;
}

function showSettings(){
  journalBar.style.display="none";
  content.innerHTML=`<h2>Settings</h2><button onclick="logout()">ƒêƒÉng xu·∫•t</button>`;
}


function logout(){
  localStorage.clear();
  location.reload();
}


/* ===== SAVE BOOK ===== */
function saveBook(key){
    let library = JSON.parse(localStorage.getItem("library") || "[]");
    if(library.includes(key)){
        alert("üìå S√°ch ƒë√£ c√≥ trong Library");
        return;
    }
    library.push(key);
    localStorage.setItem("library", JSON.stringify(library));
    alert("‚úÖ ƒê√£ l∆∞u s√°ch v√†o Library");
}

/* ===== LIBRARY PAGE ===== */
function showLibrary(){
    journalBar.style.display="none";
    let library = JSON.parse(localStorage.getItem("library") || "[]");

    if(library.length === 0){
        content.innerHTML = `<h2>üìö Library</h2><p>B·∫°n ch∆∞a l∆∞u s√°ch n√†o.</p>`;
        return;
    }

    content.innerHTML = `
    <h2>üìö Library</h2>
    ${library.map(k => `
      <div class="post">
        <h3>${books[k].title}</h3>
        <p><strong>T√°c gi·∫£:</strong> ${books[k].author}</p>
        <p>${books[k].content}</p>
        <button onclick="openBook('${k}')">üìñ Xem chi ti·∫øt</button>
      </div>
    `).join("")}
    `;
}

/* ===== PROFILE THREADS-LIKE HO√ÄN CH·ªàNH ===== */

// Kh·ªüi t·∫°o profile m·∫∑c ƒë·ªãnh n·∫øu ch∆∞a c√≥
let profile = JSON.parse(localStorage.getItem("profile")) || {
    username: localStorage.getItem("user") || "Anonymous",
    avatar: "https://via.placeholder.com/90",
    bio: "Ch∆∞a c·∫≠p nh·∫≠t.",
    topics: [],
    followers: 0,
    posts: [], // B√†i vi·∫øt c√° nh√¢n
    reposts: [] // B√†i vi·∫øt ƒë√£ repost
};

// Render profile Threads-like
function renderProfile(){
    content.innerHTML = `
        <div style="background:#fff;border-radius:18px;padding:25px;margin-bottom:20px;box-shadow:0 4px 12px rgba(0,0,0,0.1)">
            <div style="display:flex;align-items:center;gap:20px;margin-bottom:15px">
                <img src="${profile.avatar}" style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #111">
                <div style="flex:1">
                    <div style="display:flex;align-items:center;justify-content:space-between">
                        <h2 style="margin:0;font-size:26px">@${profile.username}</h2>
                        <button onclick="openEditProfile()" style="padding:8px 16px;background:#111;color:white;border:none;border-radius:12px;font-weight:600;cursor:pointer">Ch·ªânh s·ª≠a</button>
                    </div>
                    <p style="margin:6px 0;font-size:14px;color:#555">Bio: ${profile.bio}</p>
                    <p style="margin:6px 0;font-size:14px;color:#555">Ch·ªß ƒë·ªÅ quan t√¢m: ${profile.topics.join(", ") || "Ch∆∞a c√≥"}</p>
                    <p style="margin:6px 0;font-size:14px;color:#555">Followers: ${profile.followers}</p>
                </div>
            </div>
        </div>

        <div>
            <h3 style="margin-bottom:12px;font-size:18px;color:#111">B√†i vi·∫øt c√° nh√¢n</h3>
            <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;margin-bottom:30px">
                ${profile.posts.length ? profile.posts.map(p=>`
                    <div style="background:#fff;border-radius:14px;padding:12px;box-shadow:0 2px 6px rgba(0,0,0,0.1);font-size:14px">${p}</div>
                `).join("") : "<p>Ch∆∞a c√≥ b√†i vi·∫øt.</p>"}
            </div>

            <h3 style="margin-bottom:12px;font-size:18px;color:#111">B√†i vi·∫øt ƒë√£ repost</h3>
            <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px">
                ${profile.reposts.length ? profile.reposts.map(p=>`
                    <div style="background:#fff;border-radius:14px;padding:12px;box-shadow:0 2px 6px rgba(0,0,0,0.1);font-size:14px">${p}</div>
                `).join("") : "<p>Ch∆∞a c√≥ b√†i repost.</p>"}
            </div>
        </div>
    `;
}

// M·ªü form ch·ªânh s·ª≠a profile
function openEditProfile(){
    // X√≥a form c≈© n·∫øu c√≤n
    const oldForm = document.getElementById("editProfileForm");
    if(oldForm) oldForm.remove();

    content.innerHTML += `
        <div id="editProfileForm" style="background:#fff;padding:20px;border-radius:18px;margin-top:20px;box-shadow:0 4px 12px rgba(0,0,0,0.1)">
            <h3 style="margin-bottom:15px;color:#111">Ch·ªânh s·ª≠a Profile</h3>
            <input type="text" id="editUsername" placeholder="T√™n ng∆∞·ªùi d√πng" value="${profile.username}" style="width:100%;margin-bottom:12px;padding:10px;border-radius:10px;border:1px solid #ccc">
            <textarea id="editBio" placeholder="Bio" style="width:100%;margin-bottom:12px;padding:10px;border-radius:10px;border:1px solid #ccc">${profile.bio}</textarea>
            <input type="text" id="editTopics" placeholder="Ch·ªß ƒë·ªÅ quan t√¢m (ngƒÉn c√°ch b·∫±ng d·∫•u ,)" value="${profile.topics.join(", ")}" style="width:100%;margin-bottom:12px;padding:10px;border-radius:10px;border:1px solid #ccc">
            <input type="number" id="editFollowers" placeholder="Followers" value="${profile.followers}" style="width:100%;margin-bottom:12px;padding:10px;border-radius:10px;border:1px solid #ccc">
            <input type="file" id="editAvatar" style="margin-bottom:12px">
            <div style="display:flex;gap:10px">
                <button onclick="saveProfileEdits()" style="flex:1;padding:10px;background:#111;color:white;border:none;border-radius:12px;cursor:pointer">L∆∞u</button>
                <button onclick="renderProfile()" style="flex:1;padding:10px;background:#ccc;color:#111;border:none;border-radius:12px;cursor:pointer">H·ªßy</button>
            </div>
        </div>
    `;
}

// L∆∞u ch·ªânh s·ª≠a profile
function saveProfileEdits(){
    profile.username = document.getElementById("editUsername").value || profile.username;
    profile.bio = document.getElementById("editBio").value || profile.bio;
    profile.topics = document.getElementById("editTopics").value.split(",").map(t=>t.trim()).filter(t=>t);
    profile.followers = parseInt(document.getElementById("editFollowers").value) || profile.followers;

    const avatarFile = document.getElementById("editAvatar").files[0];
    if(avatarFile){
        const reader = new FileReader();
        reader.onload = ()=>{
            profile.avatar = reader.result;
            localStorage.setItem("profile", JSON.stringify(profile));
            renderProfile();
        };
        reader.readAsDataURL(avatarFile);
    } else {
        localStorage.setItem("profile", JSON.stringify(profile));
        renderProfile();
    }
}

// Hi·ªÉn th·ªã profile
function showProfile(){
    journalBar.style.display="none";
    profile.username = localStorage.getItem("user") || profile.username;
    renderProfile();
}

function likePost(index){
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  posts[index].likes = (posts[index].likes || 0) + 1;
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

function toggleComments(index){
  const commentBox = document.getElementById(`comments-${index}`);
  commentBox.style.display = commentBox.style.display === "none" ? "block" : "none";
}

function addComment(index){
  const input = document.getElementById(`commentInput-${index}`);
  const text = input.value.trim();
  if(!text) return;
  
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  if(!posts[index].comments) posts[index].comments=[];
  
  posts[index].comments.push({user: localStorage.getItem("user")||"Anonymous", text});
  localStorage.setItem("posts", JSON.stringify(posts));
  input.value="";
  renderPosts();
  toggleComments(index); // Gi·ªØ m·ªü khung b√¨nh lu·∫≠n
  toggleComments(index); // M·ªü l·∫°i sau render
}

function repostPost(index){
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  let post=posts[index];

  // L∆∞u v√†o profile
  if(!profile.reposts) profile.reposts=[];
  profile.reposts.unshift(`${post.user}: ${post.text}`);
  localStorage.setItem("profile", JSON.stringify(profile));

  // Ghi nh·∫≠n repost trong b√†i vi·∫øt g·ªëc
  if(!post.reposts) post.reposts=[];
  post.reposts.push(localStorage.getItem("user")||"Anonymous");
  localStorage.setItem("posts", JSON.stringify(posts));

  // Ghi Activity
  addActivity(`@${localStorage.getItem("user")||"Anonymous"} ƒë√£ repost b√†i vi·∫øt c·ªßa @${post.user}`);

  renderPosts();
  alert("‚úÖ B√†i vi·∫øt ƒë√£ ƒë∆∞·ª£c repost v√†o profile c·ªßa b·∫°n!");
}

function likePost(index){
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  posts[index].likes = (posts[index].likes || 0) + 1;
  localStorage.setItem("posts", JSON.stringify(posts));

  addActivity(`@${localStorage.getItem("user")||"Anonymous"} ƒë√£ th√≠ch b√†i vi·∫øt c·ªßa @${posts[index].user}`);
  renderPosts();
}

function addComment(index){
  const input=document.getElementById(`commentInput-${index}`);
  const text=input.value.trim();
  if(!text) return;

  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  if(!posts[index].comments) posts[index].comments=[];
  posts[index].comments.push({user: localStorage.getItem("user")||"Anonymous", text});
  localStorage.setItem("posts", JSON.stringify(posts));
  input.value="";
  toggleComments(index); toggleComments(index);

  addActivity(`@${localStorage.getItem("user")||"Anonymous"} ƒë√£ b√¨nh lu·∫≠n b√†i vi·∫øt c·ªßa @${posts[index].user}`);
}

function addActivity(message){
  let activity=JSON.parse(localStorage.getItem("activity")||"[]");
  activity.unshift({message,time:new Date().toLocaleTimeString()});
  localStorage.setItem("activity", JSON.stringify(activity));
}

function showActivity(){
  journalBar.style.display="none";
  let activity=JSON.parse(localStorage.getItem("activity")||"[]");
  content.innerHTML=`<h2>Activity</h2>` + activity.map(a=>
    `<div class="activity-item">${a.message} <span style="float:right;font-size:12px;color:#999">${a.time}</span></div>`
  ).join("");
}

function createPost(){
  const text=journalText.value;
  if(!text) return;
  const img=document.getElementById("journalImage").files[0];
  const reader=new FileReader();
  reader.onload=()=>{
    let posts=JSON.parse(localStorage.getItem("posts")||"[]");
    posts.unshift({user:localStorage.getItem("user")||"Anonymous",text,likes:0,comments:[],reposts:[],img:reader.result});
    localStorage.setItem("posts",JSON.stringify(posts));
    journalText.value="";journalImage.value="";
    renderPosts();
    addActivity(`@${localStorage.getItem("user")||"Anonymous"} ƒë√£ ƒëƒÉng b√†i vi·∫øt m·ªõi`);
  };
  img?reader.readAsDataURL(img):reader.onload();
}

/* ===== FORUM DATA ===== */
function joinForum(bookKey){
  let joined = JSON.parse(localStorage.getItem("joinedForums") || "[]");

  if(!joined.includes(bookKey)){
    joined.push(bookKey);
    localStorage.setItem("joinedForums", JSON.stringify(joined));
  }

  openForumDetail(bookKey); // CHUY·ªÇN TRANG TR·ª∞C TI·∫æP
}

function showForum(){
  journalBar.style.display = "none";

  let joined = JSON.parse(localStorage.getItem("joinedForums") || "[]");

  if(joined.length === 0){
    content.innerHTML = `
      <h2>üó®Ô∏è Forum</h2>
      <p>B·∫°n ch∆∞a tham gia di·ªÖn ƒë√†n n√†o.</p>
    `;
    return;
  }

  content.innerHTML = `
    <h2>üó®Ô∏è Forum ƒë√£ tham gia</h2>
    ${joined.map(k => `
      <div class="post" onclick="openForumDetail('${k}')" style="cursor:pointer">
        <h3>${books[k].title}</h3>
        <p>${books[k].content}</p>
      </div>
    `).join("")}
  `;
}

function openForumDetail(bookKey){
  journalBar.style.display = "none";

  let forumPosts = JSON.parse(localStorage.getItem("forum_"+bookKey) || "[]");

  content.innerHTML = `
    <h2>üó®Ô∏è Forum: ${books[bookKey].title}</h2>

    <div class="post">
      <textarea id="forumText"
        placeholder="Vi·∫øt b√†i th·∫£o lu·∫≠n..."
        style="width:100%;height:90px;border-radius:14px;padding:12px"></textarea>

      <button onclick="createForumPost('${bookKey}')"
        style="margin-top:10px;padding:10px 20px;border:none;border-radius:20px;background:#111;color:#fff">
        ƒêƒÉng b√†i
      </button>
    </div>

    <div style="display:flex;justify-content:space-between;align-items:center">
    <h2>üó®Ô∏è Forum: ${books[bookKey].title}</h2>
    <button onclick="leaveForum('${bookKey}')"
      style="padding:8px 16px;border:none;border-radius:20px;
             background:#eee;color:#111;cursor:pointer">
      üö™ Tho√°t
    </button>
  </div>

    ${forumPosts.map(p => `
      <div class="post">
        <h4>@${p.user}</h4>
        <p>${p.text}</p>
      </div>
    `).join("")}
  `;
}

function createForumPost(bookKey){
  const text = document.getElementById("forumText").value.trim();
  if(!text) return;

  let forumPosts = JSON.parse(localStorage.getItem("forum_"+bookKey) || "[]");

  forumPosts.unshift({
    user: localStorage.getItem("user") || "Anonymous",
    text
  });

  localStorage.setItem("forum_"+bookKey, JSON.stringify(forumPosts));
  openForumDetail(bookKey); // render l·∫°i
}

function leaveForum(bookKey){
  if(!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën tho√°t di·ªÖn ƒë√†n n√†y kh√¥ng?")) return;

  let joined = JSON.parse(localStorage.getItem("joinedForums") || "[]");
  joined = joined.filter(k => k !== bookKey);

  localStorage.setItem("joinedForums", JSON.stringify(joined));

  showForum(); // quay v·ªÅ danh s√°ch Forum
}

function openAuthorProfile(){
  if(!currentAuthorKey || !authors[currentAuthorKey]) return;

  const a = authors[currentAuthorKey];
  bookModal.style.display = "none";
  journalBar.style.display = "none";

  content.innerHTML = `
    <div class="post" style="max-width:700px;margin:auto">
      <div style="display:flex;gap:20px;align-items:center">
        <img src="${a.avatar}"
             style="width:120px;height:120px;border-radius:50%;
                    object-fit:cover;border:3px solid #111">
        <div>
          <h2 style="margin:0">${a.name}</h2>
          <p style="margin:6px 0;color:#555">${a.years}</p>
          <p style="margin:6px 0">${a.bio}</p>
        </div>
      </div>

      <hr style="margin:20px 0">

      <h3>T√°c ph·∫©m ti√™u bi·ªÉu</h3>
      ${a.works.map(w=>`<div class="post">${w}</div>`).join("")}

      <button onclick="showFeed()"
        style="margin-top:20px;padding:10px 20px;
               border:none;border-radius:20px;
               background:#111;color:white;cursor:pointer">
        ‚Üê Quay l·∫°i
      </button>
    </div>
  `;
}




</script>

</body>
</html>